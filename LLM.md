# LLM Summary

## Эндпоинт `/summary` формирует краткий «executive summary» по метрикам кампаний.

## Режимы работы

- **USE_LLM=0** — шаблонная строка (детерминированный режим):
CTR=<значение>%, CPC=<значение>; данных достаточно.

#### Пример:

CTR=5.00%, CPC=0.50; данных достаточно.

- **USE_LLM=1** — LLM-стиль: CTR показывает долю кликов (<ctr>%),
а CPC — среднюю стоимость клика (<cpc>);
вместе метрики отражают эффективность.

#### Пример:

CTR показывает долю кликов (5.00%),
а CPC — среднюю стоимость клика (0.50);
вместе метрики отражают эффективность.

## Поведение при недостатке данных

Если данных за указанный период нет или их недостаточно:
- Возвращается HTTP 204
- Текст `"Недостаточно данных"` не генерируется LLM

## Примечания

- LLM работает только при `USE_LLM=1` в `.env`
- При `USE_LLM=0` возвращается строгий шаблон, удобный для автоматизированных отчётов
- Метрики CTR и CPC вычисляются как:
  - `CTR = clicks / impressions`
  - `CPC = cost / clicks`